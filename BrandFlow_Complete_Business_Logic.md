# ğŸš€ BrandFlow - Complete Business Logic & Context

## ğŸ“Œ ì‹œìŠ¤í…œ ê°œìš”

BrandFlowëŠ” **ë§ˆì¼€íŒ… ëŒ€í–‰ì‚¬ ì „ìš© í†µí•© ì—…ë¬´ ê´€ë¦¬ í”Œë«í¼**ì…ë‹ˆë‹¤. ë¸Œëœë“œ ë§ˆì¼€íŒ… ëŒ€í–‰ì‚¬ê°€ í´ë¼ì´ì–¸íŠ¸ì˜ ìº í˜ì¸ì„ ê´€ë¦¬í•˜ê³ , ì½˜í…ì¸ ë¥¼ ì œì‘í•˜ë©°, ë§¤ì¶œì„ ì¶”ì í•˜ê³ , ì§ì› ì¸ì„¼í‹°ë¸Œë¥¼ ê³„ì‚°í•˜ëŠ” ëª¨ë“  ì—…ë¬´ë¥¼ í•˜ë‚˜ì˜ ì‹œìŠ¤í…œì—ì„œ ì²˜ë¦¬í•©ë‹ˆë‹¤.

### ğŸ¯ í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ëª¨ë¸
1. **ëŒ€í–‰ì‚¬**: ë§ˆì¼€íŒ… ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” ì„œë¹„ìŠ¤ ì œê³µì
2. **í´ë¼ì´ì–¸íŠ¸**: ë§ˆì¼€íŒ… ì„œë¹„ìŠ¤ë¥¼ ë°›ëŠ” ê³ ê°ì‚¬
3. **ìº í˜ì¸**: í´ë¼ì´ì–¸íŠ¸ë¥¼ ìœ„í•œ ë§ˆì¼€íŒ… í”„ë¡œì íŠ¸ ë‹¨ìœ„
4. **ì½˜í…ì¸ **: ë¸”ë¡œê·¸, SNS ë“±ì˜ ì‹¤ì œ ì œì‘ë¬¼
5. **ë§¤ì¶œ**: ì™„ë£Œëœ ì„œë¹„ìŠ¤ì— ëŒ€í•œ ìˆ˜ìµ ê¸°ë¡
6. **ì¸ì„¼í‹°ë¸Œ**: ì§ì›ì—ê²Œ ì§€ê¸‰í•˜ëŠ” ì„±ê³¼ ë³´ìƒ

---

## ğŸ‘¥ ì‚¬ìš©ì ì—­í•  ë° ê¶Œí•œ ì‹œìŠ¤í…œ

### ğŸ”´ ìŠˆí¼ ì–´ë“œë¯¼ (Super Admin)
- **ì •ì˜**: ì‹œìŠ¤í…œ ì „ì²´ë¥¼ ê´€ë¦¬í•˜ëŠ” ìµœê³  ê´€ë¦¬ì
- **íŠ¹ì§•**: ëª¨ë“  ëŒ€í–‰ì‚¬ì˜ ë°ì´í„°ì— ì ‘ê·¼ ê°€ëŠ¥
- **ì£¼ìš” ê¶Œí•œ**:
  - ëª¨ë“  ì‚¬ìš©ì ìƒì„±/ìˆ˜ì •/ì‚­ì œ
  - ì‹œìŠ¤í…œ ì„¤ì • ë³€ê²½
  - ëª¨ë“  ë°ì´í„° ì¡°íšŒ/ìˆ˜ì •
  - ìº í˜ì¸ ì™„ì „ ì‚­ì œ
  - ì‹œìŠ¤í…œ ì´ˆê¸°í™”
- **ë¹„ì¦ˆë‹ˆìŠ¤ ì—­í• **: í”Œë«í¼ ìš´ì˜ì, ê¸°ìˆ  ê´€ë¦¬ì

### ğŸ”µ ëŒ€í–‰ì‚¬ ì–´ë“œë¯¼ (Agency Admin)
- **ì •ì˜**: íŠ¹ì • ëŒ€í–‰ì‚¬ì˜ ìš´ì˜ì„ ë‹´ë‹¹í•˜ëŠ” ê´€ë¦¬ì
- **íŠ¹ì§•**: ìì‹ ì´ ì†Œì†ëœ ëŒ€í–‰ì‚¬ì˜ ë°ì´í„°ë§Œ ì ‘ê·¼
- **ì£¼ìš” ê¶Œí•œ**:
  - ëŒ€í–‰ì‚¬ ì†Œì† ì§ì› ê´€ë¦¬ (ìŠˆí¼ ì–´ë“œë¯¼ ì œì™¸)
  - í´ë¼ì´ì–¸íŠ¸ ê³„ì • ê´€ë¦¬
  - ë§¤ì¶œ ìŠ¹ì¸/ê±°ì ˆ
  - êµ¬ë§¤ìš”ì²­ ìŠ¹ì¸/ê±°ì ˆ
  - ì¸ì„¼í‹°ë¸Œ ê³„ì‚° ë° ìŠ¹ì¸
  - ì œí•œì  ì‹œìŠ¤í…œ ì„¤ì •
- **ë¹„ì¦ˆë‹ˆìŠ¤ ì—­í• **: ëŒ€í–‰ì‚¬ ëŒ€í‘œ, íŒ€ì¥, ìš´ì˜ ê´€ë¦¬ì

### ğŸŸ¢ ì§ì› (Staff)
- **ì •ì˜**: ì‹¤ì œ ìº í˜ì¸ì„ ë‹´ë‹¹í•˜ê³  ìš´ì˜í•˜ëŠ” ì‹¤ë¬´ì
- **íŠ¹ì§•**: ìì‹ ì´ ë‹´ë‹¹í•˜ëŠ” ìº í˜ì¸ê³¼ í´ë¼ì´ì–¸íŠ¸ë§Œ ê´€ë¦¬
- **ì£¼ìš” ê¶Œí•œ**:
  - ë‹´ë‹¹ ìº í˜ì¸ ìƒì„±/ìˆ˜ì •
  - ì£¼ì œ/ëª©ì°¨ ë“±ë¡
  - ë‹´ë‹¹ í´ë¼ì´ì–¸íŠ¸ ê´€ë¦¬
  - ë§¤ì¶œ ë“±ë¡ (ìŠ¹ì¸ í•„ìš”)
  - êµ¬ë§¤ìš”ì²­ ì‘ì„±
  - ê°œì¸ ì¸ì„¼í‹°ë¸Œ ì¡°íšŒ
- **ë¹„ì¦ˆë‹ˆìŠ¤ ì—­í• **: ìº í˜ì¸ ë§¤ë‹ˆì €, ì½˜í…ì¸  ê¸°íšì, ê³„ì • ê´€ë¦¬ì

### ğŸŸ  í´ë¼ì´ì–¸íŠ¸ (Client)
- **ì •ì˜**: ë§ˆì¼€íŒ… ì„œë¹„ìŠ¤ë¥¼ ë°›ëŠ” ê³ ê°ì‚¬ ë‹´ë‹¹ì
- **íŠ¹ì§•**: ìì‹ ì˜ ìº í˜ì¸ë§Œ ì¡°íšŒ ê°€ëŠ¥, ìŠ¹ì¸ ê¶Œí•œ ë³´ìœ 
- **ì£¼ìš” ê¶Œí•œ**:
  - ìì‹ ì˜ ìº í˜ì¸ ì¡°íšŒ
  - ì£¼ì œ/ëª©ì°¨ ìŠ¹ì¸/ë°˜ë ¤
  - ì½˜í…ì¸  ê²€í†  ë° í”¼ë“œë°±
  - ì§„í–‰ ìƒí™© ëª¨ë‹ˆí„°ë§
- **ë¹„ì¦ˆë‹ˆìŠ¤ ì—­í• **: ê³ ê°ì‚¬ ë§ˆì¼€íŒ… ë‹´ë‹¹ì, ë¸Œëœë“œ ë§¤ë‹ˆì €

---

## ğŸ—ï¸ ë°ì´í„° ëª¨ë¸ ë° ê´€ê³„

### ğŸ“Š í•µì‹¬ ì—”í‹°í‹°

#### Users (ì‚¬ìš©ì)
```javascript
{
  id: number,
  name: string,
  email: string,
  role: "ìŠˆí¼ ì–´ë“œë¯¼" | "ëŒ€í–‰ì‚¬ ì–´ë“œë¯¼" | "ì§ì›" | "í´ë¼ì´ì–¸íŠ¸",
  company: string,        // ì†Œì† íšŒì‚¬
  contact: string,        // ì—°ë½ì²˜
  incentiveRate: number,  // ì¸ì„¼í‹°ë¸Œìœ¨ (ì§ì›/ì–´ë“œë¯¼ë§Œ)
  creatorId: number,      // ìƒì„±ì ID
  createdAt: datetime,
  updatedAt: datetime
}
```

#### Campaigns (ìº í˜ì¸)
```javascript
{
  id: number,
  name: string,           // ìº í˜ì¸ëª…
  client: string,         // í´ë¼ì´ì–¸íŠ¸ íšŒì‚¬ëª…
  userId: number,         // í´ë¼ì´ì–¸íŠ¸ ì‚¬ìš©ì ID
  managerId: number,      // ë‹´ë‹¹ ì§ì› ID
  budget: number,         // ì˜ˆì‚°
  notes: string,          // ë©”ëª¨
  reminders: string,      // ë¦¬ë§ˆì¸ë”
  invoiceIssued: boolean, // ê³„ì‚°ì„œ ë°œí–‰ ì—¬ë¶€
  paymentCompleted: boolean, // ì…ê¸ˆ ì™„ë£Œ ì—¬ë¶€
  invoiceDueDate: date,   // ê³„ì‚°ì„œ ë§Œë£Œì¼
  paymentDueDate: date,   // ì…ê¸ˆ ì˜ˆì •ì¼
  posts: [Post],          // ì—°ê´€ëœ í¬ìŠ¤íŠ¸ë“¤
  createdAt: datetime,
  updatedAt: datetime
}
```

#### Posts (í¬ìŠ¤íŠ¸/ì½˜í…ì¸ )
```javascript
{
  id: number,
  campaignId: number,     // ì†Œì† ìº í˜ì¸
  title: string,          // ì œëª©
  topicStatus: string,    // ì£¼ì œ ìƒíƒœ: "ì£¼ì œ ìŠ¹ì¸ ëŒ€ê¸°" | "ì£¼ì œ ìŠ¹ì¸" | "ì£¼ì œ ë°˜ë ¤"
  outlineStatus: string,  // ëª©ì°¨ ìƒíƒœ: "ëª©ì°¨ ìŠ¹ì¸ ëŒ€ê¸°" | "ëª©ì°¨ ìŠ¹ì¸" | "ëª©ì°¨ ë°˜ë ¤"
  publishedUrl: string,   // ë°œí–‰ URL
  keywords: string,       // í‚¤ì›Œë“œ
  outline: string,        // ëª©ì°¨ ë‚´ìš©
  rejectionReason: string, // ë°˜ë ¤ ì‚¬ìœ 
  imageUrl: string,       // ì²¨ë¶€ ì´ë¯¸ì§€
  createdAt: datetime,
  updatedAt: datetime
}
```

#### Sales (ë§¤ì¶œ)
```javascript
{
  id: number,
  saleNumber: string,     // ë§¤ì¶œ ë²ˆí˜¸
  productId: number,      // ìƒí’ˆ ID
  quantity: number,       // ìˆ˜ëŸ‰
  actualCostPrice: number, // ì‹¤ì œ ì›ê°€
  actualSellingPrice: number, // ì‹¤ì œ íŒë§¤ê°€
  totalSales: number,     // ì´ ë§¤ì¶œì•¡
  marginRate: number,     // ë§ˆì§„ìœ¨
  incentiveAmount: number, // ì¸ì„¼í‹°ë¸Œ ê¸ˆì•¡
  clientName: string,     // í´ë¼ì´ì–¸íŠ¸ëª…
  clientContact: string,  // ë‹´ë‹¹ì
  clientEmail: string,    // ì´ë©”ì¼
  salesPersonId: number,  // ë§¤ì¶œ ë“±ë¡ì ID
  campaignId: number,     // ì—°ê´€ ìº í˜ì¸
  status: "ë“±ë¡" | "ê²€í† ì¤‘" | "ìŠ¹ì¸" | "ê±°ì ˆ" | "ì •ì‚°ì™„ë£Œ",
  saleDate: date,         // ë§¤ì¶œ ë°œìƒì¼
  contractStartDate: date, // ê³„ì•½ ì‹œì‘ì¼
  contractEndDate: date,  // ê³„ì•½ ì¢…ë£Œì¼
  memo: string,           // ë©”ëª¨
  reviewComment: string,  // ê²€í†  ì˜ê²¬
  createdAt: datetime,
  updatedAt: datetime
}
```

#### Products (ìƒí’ˆ)
```javascript
{
  id: number,
  name: string,           // ìƒí’ˆëª…
  description: string,    // ì„¤ëª…
  sku: string,           // ìƒí’ˆ ì½”ë“œ
  category: string,       // ì¹´í…Œê³ ë¦¬
  costPrice: number,      // ì›ê°€
  sellingPrice: number,   // ê¶Œì¥ íŒë§¤ê°€
  marginRate: number,     // ë§ˆì§„ìœ¨ (ìë™ ê³„ì‚°)
  unit: string,          // ë‹¨ìœ„ (ê±´, ê°œ, ì‹œê°„)
  minQuantity: number,    // ìµœì†Œ ìˆ˜ëŸ‰
  maxQuantity: number,    // ìµœëŒ€ ìˆ˜ëŸ‰
  tags: string,          // íƒœê·¸
  isActive: boolean,      // í™œì„± ìƒíƒœ
  createdAt: datetime,
  updatedAt: datetime
}
```

#### PurchaseRequests (êµ¬ë§¤ìš”ì²­)
```javascript
{
  id: number,
  title: string,          // ì œëª©
  description: string,    // ìƒì„¸ ì„¤ëª…
  amount: number,         // ê¸ˆì•¡
  resourceType: "ê´‘ê³ ë¹„" | "ì½˜í…ì¸  ì œì‘ë¹„" | "ë„êµ¬ êµ¬ë…ë£Œ" | "ì™¸ë¶€ ìš©ì—­ë¹„" | "ì†Œì¬ êµ¬ë§¤ë¹„" | "ê¸°íƒ€",
  priority: "ë‚®ìŒ" | "ë³´í†µ" | "ë†’ìŒ" | "ê¸´ê¸‰",
  dueDate: date,          // í¬ë§ ì™„ë£Œì¼
  campaignId: number,     // ì—°ê´€ ìº í˜ì¸
  postId: number,         // ì—°ê´€ í¬ìŠ¤íŠ¸
  requesterId: number,    // ìš”ì²­ì ID
  status: "ìŠ¹ì¸ ëŒ€ê¸°" | "ê²€í†  ì¤‘" | "ìŠ¹ì¸ë¨" | "ê±°ì ˆë¨" | "ë³´ë¥˜" | "êµ¬ë§¤ ì™„ë£Œ" | "ì •ì‚° ì™„ë£Œ",
  approverComment: string, // ìŠ¹ì¸ì ì½”ë©˜íŠ¸
  rejectReason: string,   // ê±°ì ˆ ì‚¬ìœ 
  createdAt: datetime,
  updatedAt: datetime
}
```

#### MonthlyIncentives (ì›”ê°„ ì¸ì„¼í‹°ë¸Œ)
```javascript
{
  id: number,
  employeeId: number,     // ì§ì› ID
  year: number,           // ì—°ë„
  month: number,          // ì›”
  totalSales: number,     // ì´ ë§¤ì¶œ
  totalMargin: number,    // ì´ ë§ˆì§„
  incentiveRate: number,  // ì¸ì„¼í‹°ë¸Œìœ¨
  incentiveAmount: number, // ê³„ì‚°ëœ ì¸ì„¼í‹°ë¸Œ
  adjustmentAmount: number, // ì¡°ì • ê¸ˆì•¡
  finalAmount: number,    // ìµœì¢… ì§€ê¸‰ ê¸ˆì•¡
  status: "ê³„ì‚°ì¤‘" | "ê²€í† ëŒ€ê¸°" | "ìŠ¹ì¸ì™„ë£Œ" | "ì§€ê¸‰ì™„ë£Œ" | "ë³´ë¥˜" | "ì·¨ì†Œ",
  calculatorId: number,   // ê³„ì‚°ì ID
  approverId: number,     // ìŠ¹ì¸ì ID
  createdAt: datetime,
  updatedAt: datetime
}
```

#### SystemSettings (ì‹œìŠ¤í…œ ì„¤ì •)
```javascript
{
  id: number,
  settingKey: string,     // ì„¤ì • í‚¤
  settingValue: string,   // ì„¤ì • ê°’
  settingType: "boolean" | "string" | "number" | "json",
  category: "incentive" | "sales" | "document" | "general",
  description: string,    // ì„¤ëª…
  defaultValue: string,   // ê¸°ë³¸ê°’
  accessLevel: "super_admin" | "agency_admin" | "staff",
  modifierId: number,     // ë§ˆì§€ë§‰ ìˆ˜ì •ì
  createdAt: datetime,
  updatedAt: datetime
}
```

#### WorkTypes (ì—…ë¬´íƒ€ì…)
```javascript
{
  id: number,
  name: string,           // ì—…ë¬´íƒ€ì…ëª… (ì˜ˆ: ë¸”ë¡œê·¸, SNS, ê´‘ê³ )
  description: string,    // ì„¤ëª…
  unitPrice: number,      // ë‹¨ê°€
  unit: string,          // ë‹¨ìœ„
  category: string,       // ì¹´í…Œê³ ë¦¬
  isActive: boolean,      // í™œì„± ìƒíƒœ
  createdAt: datetime,
  updatedAt: datetime
}
```

---

## ğŸ”„ ë¹„ì¦ˆë‹ˆìŠ¤ ì›Œí¬í”Œë¡œìš°

### ğŸ“‹ ìº í˜ì¸ ê´€ë¦¬ ì›Œí¬í”Œë¡œìš°

#### 1. ìº í˜ì¸ ìƒì„± í”„ë¡œì„¸ìŠ¤
```
[ì§ì›/ì–´ë“œë¯¼] ìº í˜ì¸ ìƒì„±
â†“
í´ë¼ì´ì–¸íŠ¸ ì •ë³´ ì…ë ¥ (íšŒì‚¬ëª…, ë‹´ë‹¹ì)
â†“
ë‹´ë‹¹ ì§ì› ë°°ì •
â†“
ì˜ˆì‚° ë° ì¼ì • ì„¤ì •
â†“
ìº í˜ì¸ í™œì„±í™”
â†“
[ì‹œìŠ¤í…œ] ìë™ ì•Œë¦¼ ë°œì†¡
```

#### 2. ì½˜í…ì¸  ì œì‘ ì›Œí¬í”Œë¡œìš°
```
[ë‹´ë‹¹ ì§ì›] ì£¼ì œ ë“±ë¡
â†“
ì œëª©, í‚¤ì›Œë“œ, ì°¸ê³  ì´ë¯¸ì§€ ì—…ë¡œë“œ
â†“
[í´ë¼ì´ì–¸íŠ¸] ì£¼ì œ ê²€í† 
â†“
ìŠ¹ì¸ â†’ [ë‹´ë‹¹ ì§ì›] ëª©ì°¨ ë“±ë¡
â†“     
ë°˜ë ¤ â†’ [ë‹´ë‹¹ ì§ì›] ì£¼ì œ ìˆ˜ì •
â†“
[í´ë¼ì´ì–¸íŠ¸] ëª©ì°¨ ê²€í† 
â†“
ìŠ¹ì¸ â†’ ì½˜í…ì¸  ì œì‘ ì‹œì‘
â†“
ë°˜ë ¤ â†’ [ë‹´ë‹¹ ì§ì›] ëª©ì°¨ ìˆ˜ì •
â†“
[ì‹œìŠ¤í…œ] ì™„ë£Œ ìƒíƒœ ì—…ë°ì´íŠ¸
```

#### 3. ìŠ¹ì¸ ìƒíƒœ ì‹œìŠ¤í…œ
- **ì£¼ì œ ìŠ¹ì¸ ëŒ€ê¸°**: í´ë¼ì´ì–¸íŠ¸ì˜ ì£¼ì œ ê²€í†  ëŒ€ê¸°
- **ì£¼ì œ ìŠ¹ì¸**: í´ë¼ì´ì–¸íŠ¸ê°€ ì£¼ì œë¥¼ ìŠ¹ì¸, ëª©ì°¨ ë“±ë¡ ê°€ëŠ¥
- **ì£¼ì œ ë°˜ë ¤**: ì£¼ì œ ìˆ˜ì • í•„ìš”, ë°˜ë ¤ ì‚¬ìœ  ê¸°ë¡
- **ëª©ì°¨ ìŠ¹ì¸ ëŒ€ê¸°**: í´ë¼ì´ì–¸íŠ¸ì˜ ëª©ì°¨ ê²€í†  ëŒ€ê¸°  
- **ëª©ì°¨ ìŠ¹ì¸**: ìµœì¢… ìŠ¹ì¸, ì½˜í…ì¸  ì œì‘ ì‹œì‘
- **ëª©ì°¨ ë°˜ë ¤**: ëª©ì°¨ ìˆ˜ì • í•„ìš”, ë°˜ë ¤ ì‚¬ìœ  ê¸°ë¡

### ğŸ’° ë§¤ì¶œ ê´€ë¦¬ ì›Œí¬í”Œë¡œìš°

#### 1. ë§¤ì¶œ ë“±ë¡ í”„ë¡œì„¸ìŠ¤
```
[ì§ì›] ë§¤ì¶œ ë“±ë¡
â†“
ìƒí’ˆ ì„ íƒ â†’ ì›ê°€/íŒë§¤ê°€ ìë™ ì…ë ¥
â†“
ìˆ˜ëŸ‰, í´ë¼ì´ì–¸íŠ¸ ì •ë³´ ì…ë ¥
â†“
[ì‹œìŠ¤í…œ] ë§ˆì§„ìœ¨, ì¸ì„¼í‹°ë¸Œ ìë™ ê³„ì‚°
â†“
ìƒíƒœ: "ë“±ë¡" â†’ ê´€ë¦¬ì ê²€í†  ëŒ€ê¸°
```

#### 2. ë§¤ì¶œ ìŠ¹ì¸ í”„ë¡œì„¸ìŠ¤
```
[ê´€ë¦¬ì] ë§¤ì¶œ ê²€í† 
â†“
ìŠ¹ì¸ â†’ ìƒíƒœ: "ìŠ¹ì¸" â†’ ì¸ì„¼í‹°ë¸Œ ê³„ì‚° ëŒ€ìƒ
â†“
ê±°ì ˆ â†’ ìƒíƒœ: "ê±°ì ˆ" â†’ ì§ì› ìˆ˜ì • í•„ìš”
â†“
[ì‹œìŠ¤í…œ] ìŠ¹ì¸ ì‹œ ìë™ ë¬¸ì„œ ìƒì„± ì˜µì…˜
```

#### 3. ë¬¸ì„œ ìë™ ìƒì„± ì‹œìŠ¤í…œ
```javascript
// ê±°ë˜ëª…ì„¸ì„œ/ê²¬ì ì„œ ìƒì„± ë¡œì§
function generateSalesDocuments(sale) {
  const product = getProductById(sale.productId);
  const document = {
    header: {
      title: "ê±°ë˜ëª…ì„¸ì„œ / ê²¬ì ì„œ",
      issuer: loggedInUser.company,
      issueDate: new Date().toLocaleDateString('ko-KR')
    },
    client: {
      name: sale.clientName,
      contact: sale.clientContact,
      period: `${sale.contractStartDate} ~ ${sale.contractEndDate}`
    },
    items: [{
      productName: product.name,
      category: product.category,
      quantity: sale.quantity,
      unitPrice: sale.actualSellingPrice,
      totalPrice: sale.actualSellingPrice * sale.quantity
    }],
    total: sale.actualSellingPrice * sale.quantity,
    memo: sale.memo
  };
  return generateHTMLDocument(document);
}
```

### ğŸ›’ êµ¬ë§¤ìš”ì²­ ê´€ë¦¬ ì›Œí¬í”Œë¡œìš°

#### 1. êµ¬ë§¤ìš”ì²­ ì‘ì„± í”„ë¡œì„¸ìŠ¤
```
[ì§ì›] êµ¬ë§¤ìš”ì²­ ì‘ì„±
â†“
ì œëª©, ì„¤ëª…, ë¦¬ì†ŒìŠ¤ íƒ€ì… ì…ë ¥
â†“
ì—°ê´€ ìº í˜ì¸ ì„ íƒ â†’ [ì‹œìŠ¤í…œ] ì›ê°€ ìë™ ê³„ì‚°
â†“
ê¸ˆì•¡ ìˆ˜ë™ ì…ë ¥ ë˜ëŠ” ìë™ ê³„ì‚° ì‚¬ìš©
â†“
ìš°ì„ ìˆœìœ„ ë° í¬ë§ ì™„ë£Œì¼ ì„¤ì •
â†“
ìƒíƒœ: "ìŠ¹ì¸ ëŒ€ê¸°"
```

#### 2. ìë™ ì›ê°€ ê³„ì‚° ë¡œì§
```javascript
// ìº í˜ì¸ ì—°ê²° ì‹œ ìë™ ì›ê°€ ê³„ì‚°
async function fetchCampaignCosts(campaignId) {
  const financialSummary = await api.get(`/api/campaigns/${campaignId}/financial-summary`);
  const totalCost = financialSummary.data.totalCost || 0;
  
  // ìº í˜ì¸ì˜ ëª¨ë“  ì—…ë¬´ ì›ê°€ í•©ê³„
  return {
    totalCost: totalCost,
    breakdown: financialSummary.data.costBreakdown
  };
}
```

#### 3. ìŠ¹ì¸ í”„ë¡œì„¸ìŠ¤
```
[ê´€ë¦¬ì] êµ¬ë§¤ìš”ì²­ ê²€í† 
â†“
ìŠ¹ì¸ â†’ "ìŠ¹ì¸ë¨" â†’ êµ¬ë§¤ ì§„í–‰
â†“
ê±°ì ˆ â†’ "ê±°ì ˆë¨" â†’ ê±°ì ˆ ì‚¬ìœ  ê¸°ë¡
â†“
ë³´ë¥˜ â†’ "ë³´ë¥˜" â†’ ì¶”ê°€ ê²€í†  í•„ìš”
â†“
êµ¬ë§¤ ì™„ë£Œ â†’ "êµ¬ë§¤ ì™„ë£Œ"
â†“
ì •ì‚° ì™„ë£Œ â†’ "ì •ì‚° ì™„ë£Œ"
```

### ğŸ’ ì¸ì„¼í‹°ë¸Œ ê³„ì‚° ì›Œí¬í”Œë¡œìš°

#### 1. ì›”ê°„ ì¸ì„¼í‹°ë¸Œ ìë™ ê³„ì‚°
```javascript
// ì¸ì„¼í‹°ë¸Œ ê³„ì‚° ë¡œì§
function calculateMonthlyIncentive(employee, year, month) {
  // 1. í•´ë‹¹ ì§ì›ì˜ ë‹´ë‹¹ ìº í˜ì¸ ì¡°íšŒ
  const campaigns = getCampaignsByManager(employee.id, year, month);
  
  // 2. ê° ìº í˜ì¸ì˜ ìˆ˜ìµ ê³„ì‚°
  let totalProfit = 0;
  campaigns.forEach(campaign => {
    const financialSummary = getCampaignFinancialSummary(campaign.id);
    totalProfit += financialSummary.totalProfit;
  });
  
  // 3. ë§¤ì¶œ í…Œì´ë¸”ì—ì„œ í•´ë‹¹ ì§ì›ì˜ ë§¤ì¶œ ì¡°íšŒ
  const sales = getSalesByEmployee(employee.id, year, month);
  sales.forEach(sale => {
    if (sale.status === 'ìŠ¹ì¸') {
      const margin = (sale.actualSellingPrice - sale.actualCostPrice) * sale.quantity;
      totalProfit += margin;
    }
  });
  
  // 4. ì¸ì„¼í‹°ë¸Œ ê³„ì‚°
  const incentiveAmount = totalProfit * (employee.incentiveRate / 100);
  
  return {
    totalSales: getTotalSales(employee.id, year, month),
    totalMargin: totalProfit,
    incentiveRate: employee.incentiveRate,
    incentiveAmount: incentiveAmount,
    adjustmentAmount: 0, // ìˆ˜ë™ ì¡°ì • ê¸ˆì•¡
    finalAmount: incentiveAmount
  };
}
```

#### 2. ì¸ì„¼í‹°ë¸Œ ìŠ¹ì¸ í”„ë¡œì„¸ìŠ¤
```
[ì‹œìŠ¤í…œ] ì›”ë§ ìë™ ê³„ì‚°
â†“
ìƒíƒœ: "ê³„ì‚°ì¤‘" â†’ "ê²€í† ëŒ€ê¸°"
â†“
[ê´€ë¦¬ì] ì¸ì„¼í‹°ë¸Œ ê²€í† 
â†“
ì¡°ì • í•„ìš” ì‹œ ì¡°ì • ê¸ˆì•¡ ì…ë ¥
â†“
ìŠ¹ì¸ â†’ "ìŠ¹ì¸ì™„ë£Œ"
â†“
ì§€ê¸‰ ì²˜ë¦¬ â†’ "ì§€ê¸‰ì™„ë£Œ"
```

### âš™ï¸ ì‹œìŠ¤í…œ ì„¤ì • ê´€ë¦¬

#### 1. ì„¤ì • ì¹´í…Œê³ ë¦¬ë³„ ê´€ë¦¬
- **incentive**: ì¸ì„¼í‹°ë¸Œ ê´€ë ¨ ì„¤ì •
  - `show_incentive_to_staff`: ì§ì›ì—ê²Œ ì¸ì„¼í‹°ë¸Œ í‘œì‹œ ì—¬ë¶€
  - `show_incentive_to_agency_admin`: ëŒ€í–‰ì‚¬ ì–´ë“œë¯¼ì—ê²Œ ì¸ì„¼í‹°ë¸Œ í‘œì‹œ ì—¬ë¶€
  - `auto_calculate_monthly`: ì›”ë§ ìë™ ê³„ì‚° ì—¬ë¶€

- **sales**: ë§¤ì¶œ ê´€ë ¨ ì„¤ì •  
  - `auto_generate_documents`: ë§¤ì¶œ ë“±ë¡ ì‹œ ë¬¸ì„œ ìë™ ìƒì„±
  - `require_approval`: ë§¤ì¶œ ìŠ¹ì¸ í•„ìš” ì—¬ë¶€
  - `allow_self_approval`: ë³¸ì¸ ë§¤ì¶œ ìŠ¹ì¸ í—ˆìš© ì—¬ë¶€

- **document**: ë¬¸ì„œ ê´€ë ¨ ì„¤ì •
  - `document_template`: ë¬¸ì„œ í…œí”Œë¦¿ ì„¤ì •
  - `company_info`: íšŒì‚¬ ì •ë³´ ì„¤ì •

- **general**: ì¼ë°˜ ì„¤ì •
  - `notification_enabled`: ì•Œë¦¼ í™œì„±í™” ì—¬ë¶€
  - `auto_backup`: ìë™ ë°±ì—… ì„¤ì •

#### 2. ê¶Œí•œë³„ ì„¤ì • ì ‘ê·¼
```javascript
// ì„¤ì • ì ‘ê·¼ ê¶Œí•œ ì²´í¬
function canAccessSetting(settingKey, userRole) {
  const setting = getSettingByKey(settingKey);
  
  switch(setting.accessLevel) {
    case 'super_admin':
      return userRole === 'ìŠˆí¼ ì–´ë“œë¯¼';
    case 'agency_admin':
      return ['ìŠˆí¼ ì–´ë“œë¯¼', 'ëŒ€í–‰ì‚¬ ì–´ë“œë¯¼'].includes(userRole);
    case 'staff':
      return ['ìŠˆí¼ ì–´ë“œë¯¼', 'ëŒ€í–‰ì‚¬ ì–´ë“œë¯¼', 'ì§ì›'].includes(userRole);
    default:
      return false;
  }
}
```

---

## ğŸ” ê¶Œí•œ ë° ë³´ì•ˆ ì‹œìŠ¤í…œ

### ğŸ“Š ë°ì´í„° ì ‘ê·¼ ì œì–´

#### 1. í…Œë„ŒíŠ¸ ë¶„ë¦¬ (Multi-tenancy)
```javascript
// API ìš”ì²­ ì‹œ ìë™ìœ¼ë¡œ ì¶”ê°€ë˜ëŠ” ê¶Œí•œ íŒŒë¼ë¯¸í„°
const apiParams = {
  viewerId: user.id,        // ì¡°íšŒì ID
  viewerRole: user.role,    // ì¡°íšŒì ì—­í• 
  // ë°±ì—”ë“œì—ì„œ ì´ ì •ë³´ë¡œ ì ‘ê·¼ ê°€ëŠ¥í•œ ë°ì´í„° í•„í„°ë§
};

// ì˜ˆì‹œ: ìº í˜ì¸ ì¡°íšŒ ì‹œ ê¶Œí•œ ì²´í¬
function getCampaignsByPermission(viewerId, viewerRole) {
  if (viewerRole === 'ìŠˆí¼ ì–´ë“œë¯¼') {
    return getAllCampaigns(); // ëª¨ë“  ìº í˜ì¸ ì¡°íšŒ
  } else if (viewerRole === 'ëŒ€í–‰ì‚¬ ì–´ë“œë¯¼') {
    const user = getUserById(viewerId);
    return getCampaignsByCompany(user.company); // ê°™ì€ íšŒì‚¬ ìº í˜ì¸ë§Œ
  } else if (viewerRole === 'ì§ì›') {
    return getCampaignsByManager(viewerId); // ìì‹ ì´ ë‹´ë‹¹í•˜ëŠ” ìº í˜ì¸ë§Œ
  } else if (viewerRole === 'í´ë¼ì´ì–¸íŠ¸') {
    return getCampaignsByClient(viewerId); // ìì‹ ì˜ ìº í˜ì¸ë§Œ
  }
}
```

#### 2. ê¸°ëŠ¥ë³„ ê¶Œí•œ ë§¤íŠ¸ë¦­ìŠ¤
```javascript
const permissionMatrix = {
  // ìº í˜ì¸ ê´€ë¦¬
  'campaign.create': ['ìŠˆí¼ ì–´ë“œë¯¼', 'ëŒ€í–‰ì‚¬ ì–´ë“œë¯¼', 'ì§ì›'],
  'campaign.edit': ['ìŠˆí¼ ì–´ë“œë¯¼', 'ëŒ€í–‰ì‚¬ ì–´ë“œë¯¼', 'ì§ì›'], // ë‹´ë‹¹ìë§Œ
  'campaign.delete': ['ìŠˆí¼ ì–´ë“œë¯¼'], // ìŠˆí¼ ì–´ë“œë¯¼ë§Œ
  'campaign.view': ['ìŠˆí¼ ì–´ë“œë¯¼', 'ëŒ€í–‰ì‚¬ ì–´ë“œë¯¼', 'ì§ì›', 'í´ë¼ì´ì–¸íŠ¸'], // ê¶Œí•œë³„ í•„í„°ë§
  
  // ë§¤ì¶œ ê´€ë¦¬
  'sales.create': ['ëŒ€í–‰ì‚¬ ì–´ë“œë¯¼', 'ì§ì›'],
  'sales.approve': ['ìŠˆí¼ ì–´ë“œë¯¼', 'ëŒ€í–‰ì‚¬ ì–´ë“œë¯¼'],
  'sales.edit': ['ìŠˆí¼ ì–´ë“œë¯¼', 'ëŒ€í–‰ì‚¬ ì–´ë“œë¯¼'], // + ë³¸ì¸ ë“±ë¡ ë§¤ì¶œ (ë“±ë¡ ìƒíƒœë§Œ)
  
  // êµ¬ë§¤ìš”ì²­ ê´€ë¦¬
  'purchase.create': ['ìŠˆí¼ ì–´ë“œë¯¼', 'ëŒ€í–‰ì‚¬ ì–´ë“œë¯¼', 'ì§ì›'],
  'purchase.approve': ['ìŠˆí¼ ì–´ë“œë¯¼', 'ëŒ€í–‰ì‚¬ ì–´ë“œë¯¼'],
  
  // ì‚¬ìš©ì ê´€ë¦¬
  'user.create': ['ìŠˆí¼ ì–´ë“œë¯¼', 'ëŒ€í–‰ì‚¬ ì–´ë“œë¯¼'], // ëŒ€í–‰ì‚¬ ì–´ë“œë¯¼ì€ ìŠˆí¼ ì–´ë“œë¯¼ ì œì™¸
  'user.edit': ['ìŠˆí¼ ì–´ë“œë¯¼', 'ëŒ€í–‰ì‚¬ ì–´ë“œë¯¼'], // ê¶Œí•œë³„ ì œí•œ
  'user.delete': ['ìŠˆí¼ ì–´ë“œë¯¼', 'ëŒ€í–‰ì‚¬ ì–´ë“œë¯¼'], // ê¶Œí•œë³„ ì œí•œ
  
  // ì¸ì„¼í‹°ë¸Œ ê´€ë¦¬
  'incentive.calculate': ['ìŠˆí¼ ì–´ë“œë¯¼', 'ëŒ€í–‰ì‚¬ ì–´ë“œë¯¼'],
  'incentive.approve': ['ìŠˆí¼ ì–´ë“œë¯¼', 'ëŒ€í–‰ì‚¬ ì–´ë“œë¯¼'],
  'incentive.view': ['ìŠˆí¼ ì–´ë“œë¯¼', 'ëŒ€í–‰ì‚¬ ì–´ë“œë¯¼', 'ì§ì›'], // ì§ì›ì€ ë³¸ì¸ë§Œ
  
  // ì‹œìŠ¤í…œ ì„¤ì •
  'settings.view': ['ìŠˆí¼ ì–´ë“œë¯¼', 'ëŒ€í–‰ì‚¬ ì–´ë“œë¯¼'],
  'settings.edit': ['ìŠˆí¼ ì–´ë“œë¯¼'], // ì¼ë¶€ëŠ” ëŒ€í–‰ì‚¬ ì–´ë“œë¯¼ë„ ê°€ëŠ¥
  'settings.initialize': ['ìŠˆí¼ ì–´ë“œë¯¼']
};
```

### ğŸ”’ API ë³´ì•ˆ

#### 1. ìë™ ê¶Œí•œ ì¸ì ì…˜
```javascript
// API í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ ì¸í„°ì…‰í„°
api.interceptors.request.use((config) => {
  const userData = localStorage.getItem('user');
  if (userData) {
    const user = JSON.parse(userData);
    
    // ëª¨ë“  ìš”ì²­ì— ê¶Œí•œ ì •ë³´ ìë™ ì¶”ê°€
    config.params = {
      ...config.params,
      viewerId: user.id,
      viewerRole: user.role
    };
  }
  return config;
});
```

#### 2. ì—ëŸ¬ ì²˜ë¦¬ ë° ì¬ì‹œë„
```javascript
// ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ì‹œ ìë™ ì¬ì‹œë„ ì‹œìŠ¤í…œ
api.interceptors.response.use(
  (response) => response,
  async (error) => {
    const config = error.config;
    
    // ì¬ì‹œë„ ê°€ëŠ¥í•œ ì—ëŸ¬ ì²´í¬
    if (isRetryableError(error) && config.__retryCount < MAX_RETRIES) {
      config.__retryCount = (config.__retryCount || 0) + 1;
      
      // ì§€ìˆ˜ ë°±ì˜¤í”„ ì ìš©
      const delayTime = RETRY_DELAY * Math.pow(2, config.__retryCount - 1);
      await delay(delayTime);
      
      return api(config);
    }
    
    return Promise.reject(error);
  }
);
```

---

## ğŸ’° ì¬ë¬´ ê³„ì‚° ì‹œìŠ¤í…œ

### ğŸ“Š ëŒ€ì‹œë³´ë“œ ì¬ë¬´ ë°ì´í„° ê³„ì‚°

#### 1. ì¢…í•© ì¬ë¬´ í˜„í™© ê³„ì‚° ë¡œì§
```javascript
async function calculateFinancialOverview(user) {
  // 1. êµ¬ë§¤ìš”ì²­ í†µê³„ (ë§¤ì…/ì§€ì¶œ)
  const purchaseStats = await api.get('/api/purchase-requests/summary/stats', {
    params: { viewerId: user.id, viewerRole: user.role }
  });
  
  // 2. ë§¤ì¶œ í†µê³„ (ê¸°ì¡´ sales í…Œì´ë¸”)
  const salesStats = await api.get('/api/sales/summary/stats', {
    params: { viewerId: user.id, viewerRole: user.role }
  });
  
  // 3. ìº í˜ì¸ë³„ ì¬ë¬´ ë°ì´í„° ìˆ˜ì§‘
  const campaigns = await api.get('/api/campaigns', {
    params: { viewerId: user.id, viewerRole: user.role }
  });
  
  let campaignTotalRevenue = 0;
  let campaignTotalCost = 0;
  let campaignTotalProfit = 0;
  
  // ê° ìº í˜ì¸ì˜ ì¬ë¬´ ìš”ì•½ ë°ì´í„° ìˆ˜ì§‘
  for (const campaign of campaigns.data) {
    try {
      const financialSummary = await api.get(`/api/campaigns/${campaign.id}/financial-summary`);
      campaignTotalRevenue += financialSummary.data.totalRevenue || 0;
      campaignTotalCost += financialSummary.data.totalCost || 0;
      campaignTotalProfit += financialSummary.data.totalProfit || 0;
    } catch (error) {
      console.error(`ìº í˜ì¸ ${campaign.id} ì¬ë¬´ ë°ì´í„° ë¡œë”© ì‹¤íŒ¨:`, error);
    }
  }
  
  // 4. ì¸ì„¼í‹°ë¸Œ ì´ì•¡ ê³„ì‚°
  let totalIncentives = 0;
  if (user.role === 'ìŠˆí¼ ì–´ë“œë¯¼' || user.role === 'ëŒ€í–‰ì‚¬ ì–´ë“œë¯¼') {
    const employees = await getEmployeeList(user);
    
    for (const employee of employees) {
      if (employee.incentiveRate > 0) {
        const employeeCampaigns = campaigns.data.filter(c => c.managerId === employee.id);
        
        for (const campaign of employeeCampaigns) {
          const financialSummary = await getCampaignFinancialSummary(campaign.id);
          const profit = financialSummary.totalProfit || 0;
          const incentiveAmount = profit * (employee.incentiveRate / 100);
          totalIncentives += incentiveAmount;
        }
      }
    }
  }
  
  // 5. ìµœì¢… ì¬ë¬´ í˜„í™© ê³„ì‚°
  const totalRevenue = (salesStats.data.totalRevenue || 0) + campaignTotalRevenue;
  const totalExpenses = (purchaseStats.data.totalAmount || 0) + campaignTotalCost;
  const netProfit = totalRevenue - totalExpenses;
  const finalNetProfit = netProfit - totalIncentives;
  
  return {
    totalRevenue,      // ì´ ë§¤ì¶œ = Sales ë§¤ì¶œ + Campaign ë§¤ì¶œ
    totalExpenses,     // ì´ ì§€ì¶œ = êµ¬ë§¤ìš”ì²­ + Campaign ì›ê°€
    netProfit,         // ìˆœì´ìµ = ë§¤ì¶œ - ì§€ì¶œ
    totalIncentives,   // ì´ ì¸ì„¼í‹°ë¸Œ
    finalNetProfit,    // ìµœì¢… ìˆœì´ìµ = ìˆœì´ìµ - ì¸ì„¼í‹°ë¸Œ
    campaignRevenue: campaignTotalRevenue,
    campaignCost: campaignTotalCost,
    salesRevenue: salesStats.data.totalRevenue || 0
  };
}
```

#### 2. ì§ì› ê°œë³„ í†µê³„ ê³„ì‚°
```javascript
async function calculateEmployeeStats(employee) {
  const now = new Date();
  const currentYear = now.getFullYear();
  const currentMonth = now.getMonth() + 1;
  
  // 1. ë‹´ë‹¹ ìº í˜ì¸ ëª©ë¡
  const employeeCampaigns = await getCampaignsByManager(employee.id);
  
  // 2. ì´ë²ˆë‹¬ ë§¤ì¶œ ê³„ì‚°
  let thisMonthRevenue = 0;
  let pendingInvoices = 0;
  let pendingPayments = 0;
  
  for (const campaign of employeeCampaigns) {
    const financialSummary = await getCampaignFinancialSummary(campaign.id);
    thisMonthRevenue += financialSummary.totalRevenue || 0;
    
    if (!campaign.invoiceIssued) pendingInvoices++;
    if (!campaign.paymentCompleted) pendingPayments++;
  }
  
  // 3. ì´ë²ˆë‹¬ ì¸ì„¼í‹°ë¸Œ ê³„ì‚°
  let thisMonthIncentive = 0;
  if (employee.incentiveRate > 0) {
    let totalEmployeeProfit = 0;
    
    for (const campaign of employeeCampaigns) {
      const financialSummary = await getCampaignFinancialSummary(campaign.id);
      totalEmployeeProfit += financialSummary.totalProfit || 0;
    }
    
    thisMonthIncentive = totalEmployeeProfit * (employee.incentiveRate / 100);
  }
  
  return {
    thisMonthRevenue,
    thisMonthIncentive,
    pendingInvoices,
    pendingPayments
  };
}
```

### ğŸ’ ì¸ì„¼í‹°ë¸Œ ê³„ì‚° ì„¸ë¶€ ë¡œì§

#### 1. ì›”ê°„ ì¸ì„¼í‹°ë¸Œ ìë™ ê³„ì‚° API
```javascript
async function calculateMonthlyIncentives(year, month) {
  const results = [];
  
  // 1. ëª¨ë“  ì§ì› ë° ëŒ€í–‰ì‚¬ ì–´ë“œë¯¼ ì¡°íšŒ
  const employees = await getEmployeesWithIncentiveRate();
  
  for (const employee of employees) {
    try {
      // 2. ê¸°ì¡´ ì¸ì„¼í‹°ë¸Œ ë°ì´í„° í™•ì¸
      const existingIncentive = await getMonthlyIncentive(employee.id, year, month);
      if (existingIncentive) {
        results.push({ 
          employeeId: employee.id, 
          status: 'skipped',
          message: 'ì´ë¯¸ ê³„ì‚°ëœ ë°ì´í„°ê°€ ì¡´ì¬í•©ë‹ˆë‹¤.'
        });
        continue;
      }
      
      // 3. ë‹´ë‹¹ ìº í˜ì¸ì˜ ìˆ˜ìµ ê³„ì‚°
      const campaigns = await getCampaignsByManager(employee.id, year, month);
      let totalSales = 0;
      let totalMargin = 0;
      
      for (const campaign of campaigns) {
        const financialSummary = await getCampaignFinancialSummary(campaign.id, year, month);
        totalSales += financialSummary.totalRevenue || 0;
        totalMargin += financialSummary.totalProfit || 0;
      }
      
      // 4. ë§¤ì¶œ í…Œì´ë¸”ì—ì„œ ê°œë³„ ë§¤ì¶œ ì¶”ê°€
      const sales = await getSalesByEmployee(employee.id, year, month);
      for (const sale of sales) {
        if (sale.status === 'ìŠ¹ì¸' || sale.status === 'ì •ì‚°ì™„ë£Œ') {
          const margin = (sale.actualSellingPrice - sale.actualCostPrice) * sale.quantity;
          totalSales += sale.totalSales;
          totalMargin += margin;
        }
      }
      
      // 5. ì¸ì„¼í‹°ë¸Œ ê³„ì‚°
      const incentiveAmount = Math.round(totalMargin * (employee.incentiveRate / 100));
      
      // 6. ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥
      const incentiveData = await createMonthlyIncentive({
        employeeId: employee.id,
        year,
        month,
        totalSales,
        totalMargin,
        incentiveRate: employee.incentiveRate,
        incentiveAmount,
        adjustmentAmount: 0,
        finalAmount: incentiveAmount,
        status: 'ê²€í† ëŒ€ê¸°',
        calculatorId: getCurrentUserId()
      });
      
      results.push({
        employeeId: employee.id,
        status: 'created',
        data: incentiveData
      });
      
    } catch (error) {
      results.push({
        employeeId: employee.id,
        status: 'error',
        message: error.message
      });
    }
  }
  
  return { results };
}
```

#### 2. ì¸ì„¼í‹°ë¸Œ ì¡°ì • ë° ìŠ¹ì¸
```javascript
async function updateIncentiveStatus(incentiveId, updateData) {
  const incentive = await getMonthlyIncentiveById(incentiveId);
  
  // ì¡°ì • ê¸ˆì•¡ì´ ìˆëŠ” ê²½ìš° ìµœì¢… ê¸ˆì•¡ ì¬ê³„ì‚°
  if (updateData.adjustmentAmount !== undefined) {
    updateData.finalAmount = incentive.incentiveAmount + updateData.adjustmentAmount;
  }
  
  // ìƒíƒœ ë³€ê²½ ê¶Œí•œ ì²´í¬
  if (updateData.status) {
    const allowedTransitions = {
      'ê²€í† ëŒ€ê¸°': ['ìŠ¹ì¸ì™„ë£Œ', 'ë³´ë¥˜', 'ì·¨ì†Œ'],
      'ìŠ¹ì¸ì™„ë£Œ': ['ì§€ê¸‰ì™„ë£Œ'],
      'ë³´ë¥˜': ['ê²€í† ëŒ€ê¸°', 'ìŠ¹ì¸ì™„ë£Œ', 'ì·¨ì†Œ']
    };
    
    if (!allowedTransitions[incentive.status]?.includes(updateData.status)) {
      throw new Error('í—ˆìš©ë˜ì§€ ì•ŠëŠ” ìƒíƒœ ë³€ê²½ì…ë‹ˆë‹¤.');
    }
  }
  
  return await updateMonthlyIncentive(incentiveId, {
    ...updateData,
    approverId: getCurrentUserId(),
    updatedAt: new Date()
  });
}
```

---

## ğŸ¨ UI/UX íŒ¨í„´ ë° ì»´í¬ë„ŒíŠ¸

### ğŸ“± ê³µí†µ ì»´í¬ë„ŒíŠ¸ íŒ¨í„´

#### 1. ëª¨ë‹¬ ê´€ë¦¬ ì‹œìŠ¤í…œ
```javascript
// useModal í›…ì„ í†µí•œ ëª¨ë‹¬ ìƒíƒœ ê´€ë¦¬
const useModal = () => {
  const [alertModal, setAlertModal] = useState({
    isOpen: false,
    title: '',
    message: '',
    type: 'info',
    buttonText: 'í™•ì¸'
  });
  
  const [confirmModal, setConfirmModal] = useState({
    isOpen: false,
    title: '',
    message: '',
    type: 'info',
    confirmText: 'í™•ì¸',
    cancelText: 'ì·¨ì†Œ',
    onConfirm: null,
    loading: false
  });
  
  const showAlert = (message, title = 'ì•Œë¦¼', type = 'info') => {
    return new Promise((resolve) => {
      setAlertModal({
        isOpen: true,
        title,
        message,
        type,
        buttonText: 'í™•ì¸',
        onClose: () => {
          setAlertModal(prev => ({ ...prev, isOpen: false }));
          resolve();
        }
      });
    });
  };
  
  const showConfirm = (options) => {
    return new Promise((resolve) => {
      setConfirmModal({
        isOpen: true,
        title: options.title || 'í™•ì¸',
        message: options.message || 'ê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?',
        type: options.type || 'info',
        confirmText: options.confirmText || 'í™•ì¸',
        cancelText: options.cancelText || 'ì·¨ì†Œ',
        onConfirm: () => {
          setConfirmModal(prev => ({ ...prev, isOpen: false }));
          resolve(true);
        },
        onCancel: () => {
          setConfirmModal(prev => ({ ...prev, isOpen: false }));
          resolve(false);
        }
      });
    });
  };
  
  return { alertModal, confirmModal, showAlert, showConfirm };
};
```

#### 2. ë¡œë”© ë° ì—ëŸ¬ ì²˜ë¦¬
```javascript
// LoadingButton ì»´í¬ë„ŒíŠ¸
const LoadingButton = ({ 
  loading, 
  loadingText = 'ì²˜ë¦¬ ì¤‘...', 
  onClick, 
  children,
  className,
  disabled 
}) => {
  return (
    <button
      onClick={onClick}
      disabled={loading || disabled}
      className={`${className} ${loading || disabled ? 'opacity-50 cursor-not-allowed' : ''}`}
    >
      {loading ? (
        <div className="flex items-center">
          <svg className="animate-spin -ml-1 mr-3 h-5 w-5 text-white" fill="none" viewBox="0 0 24 24">
            <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"/>
            <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"/>
          </svg>
          {loadingText}
        </div>
      ) : children}
    </button>
  );
};
```

#### 3. ìƒíƒœ ë°°ì§€ ì‹œìŠ¤í…œ
```javascript
// ë™ì  ìƒíƒœ ë°°ì§€ ìƒì„±
const getStatusBadge = (status, type = 'default') => {
  const statusConfigs = {
    // ë§¤ì¶œ ìƒíƒœ
    sales: {
      'ë“±ë¡': { bg: 'bg-yellow-100', text: 'text-yellow-800', icon: Clock },
      'ê²€í† ì¤‘': { bg: 'bg-blue-100', text: 'text-blue-800', icon: Eye },
      'ìŠ¹ì¸': { bg: 'bg-green-100', text: 'text-green-800', icon: CheckCircle },
      'ê±°ì ˆ': { bg: 'bg-red-100', text: 'text-red-800', icon: XCircle },
      'ì •ì‚°ì™„ë£Œ': { bg: 'bg-purple-100', text: 'text-purple-800', icon: DollarSign }
    },
    
    // êµ¬ë§¤ìš”ì²­ ìƒíƒœ  
    purchase: {
      'ìŠ¹ì¸ ëŒ€ê¸°': { bg: 'bg-yellow-100', text: 'text-yellow-800', icon: Clock },
      'ê²€í†  ì¤‘': { bg: 'bg-blue-100', text: 'text-blue-800', icon: Eye },
      'ìŠ¹ì¸ë¨': { bg: 'bg-green-100', text: 'text-green-800', icon: CheckCircle },
      'ê±°ì ˆë¨': { bg: 'bg-red-100', text: 'text-red-800', icon: XCircle },
      'êµ¬ë§¤ ì™„ë£Œ': { bg: 'bg-purple-100', text: 'text-purple-800', icon: ShoppingCart },
      'ì •ì‚° ì™„ë£Œ': { bg: 'bg-gray-100', text: 'text-gray-800', icon: DollarSign }
    },
    
    // ì¸ì„¼í‹°ë¸Œ ìƒíƒœ
    incentive: {
      'ê³„ì‚°ì¤‘': { bg: 'bg-gray-100', text: 'text-gray-800', icon: Calculator },
      'ê²€í† ëŒ€ê¸°': { bg: 'bg-yellow-100', text: 'text-yellow-800', icon: Clock },
      'ìŠ¹ì¸ì™„ë£Œ': { bg: 'bg-green-100', text: 'text-green-800', icon: CheckCircle },
      'ì§€ê¸‰ì™„ë£Œ': { bg: 'bg-blue-100', text: 'text-blue-800', icon: DollarSign },
      'ë³´ë¥˜': { bg: 'bg-orange-100', text: 'text-orange-800', icon: Pause },
      'ì·¨ì†Œ': { bg: 'bg-red-100', text: 'text-red-800', icon: X }
    }
  };
  
  const config = statusConfigs[type]?.[status] || 
                 { bg: 'bg-gray-100', text: 'text-gray-800', icon: HelpCircle };
  const Icon = config.icon;
  
  return (
    <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${config.bg} ${config.text}`}>
      <Icon size={12} className="mr-1" />
      {status}
    </span>
  );
};
```

### ğŸ¯ ë°˜ì‘í˜• ë””ìì¸ íŒ¨í„´

#### 1. ê·¸ë¦¬ë“œ ì‹œìŠ¤í…œ
```javascript
// ë™ì  ê·¸ë¦¬ë“œ ì»¬ëŸ¼ ê³„ì‚°
const getDynamicGridColumns = (items, conditions) => {
  let columns = 'grid-cols-1';
  
  if (conditions.shouldShowIncentive && items.length > 5) {
    columns = 'md:grid-cols-2 lg:grid-cols-6'; // ì¸ì„¼í‹°ë¸Œ í‘œì‹œ + ë§ì€ í•­ëª©
  } else if (conditions.shouldShowIncentive) {
    columns = 'md:grid-cols-2 lg:grid-cols-5'; // ì¸ì„¼í‹°ë¸Œ í‘œì‹œ
  } else {
    columns = 'md:grid-cols-2 lg:grid-cols-4'; // ê¸°ë³¸
  }
  
  return columns;
};
```

#### 2. ì¡°ê±´ë¶€ ë Œë”ë§ íŒ¨í„´
```javascript
// ê¶Œí•œ ê¸°ë°˜ ì¡°ê±´ë¶€ ë Œë”ë§
const ConditionalRender = ({ condition, children, fallback = null }) => {
  return condition ? children : fallback;
};

// ì‚¬ìš© ì˜ˆì‹œ
<ConditionalRender 
  condition={canManageIncentives}
  fallback={<div>ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.</div>}
>
  <IncentiveManagementPanel />
</ConditionalRender>
```

---

## ğŸ“Š ë°ì´í„° íë¦„ ë° ìƒíƒœ ê´€ë¦¬

### ğŸ”„ ë°ì´í„° ë™ê¸°í™” íŒ¨í„´

#### 1. ìº í˜ì¸ ë°ì´í„° ë™ê¸°í™”
```javascript
// ìº í˜ì¸ ëª©ë¡ê³¼ ìƒì„¸ ë°ì´í„° ë™ê¸°í™”
const useCampaignSync = () => {
  const [campaigns, setCampaigns] = useState([]);
  const [selectedCampaign, setSelectedCampaign] = useState(null);
  
  // ìº í˜ì¸ ëª©ë¡ ì—…ë°ì´íŠ¸ ì‹œ ì„ íƒëœ ìº í˜ì¸ë„ ë™ê¸°í™”
  const updateCampaign = useCallback((updatedCampaign) => {
    setCampaigns(prev => 
      prev.map(campaign => 
        campaign.id === updatedCampaign.id ? updatedCampaign : campaign
      )
    );
    
    // í˜„ì¬ ì„ íƒëœ ìº í˜ì¸ì´ë©´ ì—…ë°ì´íŠ¸
    if (selectedCampaign?.id === updatedCampaign.id) {
      setSelectedCampaign(updatedCampaign);
    }
  }, [selectedCampaign]);
  
  return { campaigns, setCampaigns, selectedCampaign, setSelectedCampaign, updateCampaign };
};
```

#### 2. ì‹¤ì‹œê°„ í†µê³„ ì—…ë°ì´íŠ¸
```javascript
// í†µê³„ ë°ì´í„° ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
const useStatsSync = (dependencies) => {
  const [stats, setStats] = useState({});
  const [loading, setLoading] = useState(false);
  
  const refreshStats = useCallback(async () => {
    setLoading(true);
    try {
      const [salesStats, purchaseStats, incentiveStats] = await Promise.all([
        api.get('/api/sales/summary/stats'),
        api.get('/api/purchase-requests/summary/stats'),
        api.get('/api/monthly-incentives/summary/stats')
      ]);
      
      setStats({
        sales: salesStats.data,
        purchase: purchaseStats.data, 
        incentive: incentiveStats.data
      });
    } catch (error) {
      console.error('í†µê³„ ë°ì´í„° ë¡œë”© ì‹¤íŒ¨:', error);
    } finally {
      setLoading(false);
    }
  }, []);
  
  // ì˜ì¡´ì„±ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ í†µê³„ ìƒˆë¡œê³ ì¹¨
  useEffect(() => {
    refreshStats();
  }, dependencies);
  
  return { stats, loading, refreshStats };
};
```

### ğŸ“± ì‚¬ìš©ì ê²½í—˜ ìµœì í™”

#### 1. ë‚™ê´€ì  ì—…ë°ì´íŠ¸
```javascript
// ë§¤ì¶œ ìŠ¹ì¸ ì‹œ ì¦‰ì‹œ UI ì—…ë°ì´íŠ¸
const optimisticSalesApproval = async (saleId) => {
  // 1. ì¦‰ì‹œ UI ì—…ë°ì´íŠ¸
  setSales(prev => 
    prev.map(sale => 
      sale.id === saleId 
        ? { ...sale, status: 'ìŠ¹ì¸', updatedAt: new Date() }
        : sale
    )
  );
  
  try {
    // 2. ì„œë²„ì— ì‹¤ì œ ìš”ì²­
    await api.put(`/api/sales/${saleId}`, { status: 'ìŠ¹ì¸' });
    
    // 3. í†µê³„ ìƒˆë¡œê³ ì¹¨
    refreshStats();
    
  } catch (error) {
    // 4. ì‹¤íŒ¨ ì‹œ ë¡¤ë°±
    setSales(prev => 
      prev.map(sale => 
        sale.id === saleId 
          ? { ...sale, status: 'ê²€í† ì¤‘' } // ì´ì „ ìƒíƒœë¡œ ë³µì›
          : sale
      )
    );
    
    showAlert('ìŠ¹ì¸ ì²˜ë¦¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
  }
};
```

#### 2. ë¬´í•œ ìŠ¤í¬ë¡¤ ë° ê°€ìƒí™”
```javascript
// ëŒ€ëŸ‰ ë°ì´í„° ì²˜ë¦¬ë¥¼ ìœ„í•œ ê°€ìƒ ìŠ¤í¬ë¡¤
const useVirtualScroll = (items, itemHeight = 60) => {
  const [visibleItems, setVisibleItems] = useState([]);
  const [scrollTop, setScrollTop] = useState(0);
  const containerRef = useRef();
  
  const containerHeight = 400; // ì»¨í…Œì´ë„ˆ ë†’ì´
  const visibleCount = Math.ceil(containerHeight / itemHeight);
  const startIndex = Math.floor(scrollTop / itemHeight);
  const endIndex = Math.min(startIndex + visibleCount, items.length);
  
  useEffect(() => {
    setVisibleItems(items.slice(startIndex, endIndex));
  }, [items, startIndex, endIndex]);
  
  const handleScroll = (e) => {
    setScrollTop(e.target.scrollTop);
  };
  
  return {
    visibleItems,
    containerRef,
    handleScroll,
    totalHeight: items.length * itemHeight,
    offsetY: startIndex * itemHeight
  };
};
```

---

## ğŸ”§ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ë° ì„¤ê³„ ì›ì¹™

### ğŸ—ï¸ ì»´í¬ë„ŒíŠ¸ ì•„í‚¤í…ì²˜

#### 1. ê³„ì¸µì  ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°
```
src/
â”œâ”€â”€ pages/                  # í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ Dashboard.jsx       # ëŒ€ì‹œë³´ë“œ (í†µê³„, KPI)
â”‚   â”œâ”€â”€ CampaignManagement.jsx  # ìº í˜ì¸ ê´€ë¦¬
â”‚   â”œâ”€â”€ SalesRegistration.jsx   # ë§¤ì¶œ ê´€ë¦¬
â”‚   â””â”€â”€ UserManagement.jsx      # ì‚¬ìš©ì ê´€ë¦¬
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ common/            # ê³µí†µ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ StatusBadge.jsx    # ìƒíƒœ ë°°ì§€
â”‚   â”‚   â”œâ”€â”€ AdvancedFilter.jsx # ê³ ê¸‰ í•„í„°
â”‚   â”‚   â””â”€â”€ ImageViewer.jsx    # ì´ë¯¸ì§€ ë·°ì–´
â”‚   â”œâ”€â”€ modals/           # ëª¨ë‹¬ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ NewCampaignModal.jsx   # ìº í˜ì¸ ìƒì„±
â”‚   â”‚   â”œâ”€â”€ PurchaseRequestModal.jsx # êµ¬ë§¤ìš”ì²­
â”‚   â”‚   â””â”€â”€ UserEditModal.jsx      # ì‚¬ìš©ì í¸ì§‘
â”‚   â”œâ”€â”€ ui/               # UI ë¼ì´ë¸ŒëŸ¬ë¦¬
â”‚   â”‚   â”œâ”€â”€ AlertModal.jsx     # ì•Œë¦¼ ëª¨ë‹¬
â”‚   â”‚   â”œâ”€â”€ ConfirmModal.jsx   # í™•ì¸ ëª¨ë‹¬
â”‚   â”‚   â””â”€â”€ LoadingSpinner.jsx # ë¡œë”© ìŠ¤í”¼ë„ˆ
â”‚   â””â”€â”€ campaigns/        # ìº í˜ì¸ ì „ìš© ì»´í¬ë„ŒíŠ¸
â”‚       â”œâ”€â”€ CampaignList.jsx   # ìº í˜ì¸ ëª©ë¡
â”‚       â””â”€â”€ CampaignDetail.jsx # ìº í˜ì¸ ìƒì„¸
â”œâ”€â”€ hooks/                # ì»¤ìŠ¤í…€ í›…
â”‚   â””â”€â”€ useModal.js       # ëª¨ë‹¬ ê´€ë¦¬ í›…
â”œâ”€â”€ contexts/             # React Context
â”‚   â””â”€â”€ NotificationContext.jsx # ì•Œë¦¼ ì»¨í…ìŠ¤íŠ¸
â”œâ”€â”€ api/                  # API ê´€ë ¨
â”‚   â””â”€â”€ client.js         # Axios í´ë¼ì´ì–¸íŠ¸
â””â”€â”€ utils/                # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
    â”œâ”€â”€ formatters.js     # ë°ì´í„° í¬ë§·íŒ…
    â”œâ”€â”€ validators.js     # ìœ íš¨ì„± ê²€ì‚¬
    â””â”€â”€ constants.js      # ìƒìˆ˜ ì •ì˜
```

#### 2. ë””ìì¸ ì‹œìŠ¤í…œ ì›ì¹™
```javascript
// ìƒ‰ìƒ ì‹œìŠ¤í…œ
const colorSystem = {
  // ê¸°ë³¸ ìƒ‰ìƒ
  primary: {
    50: '#eff6ff',   // ë§¤ìš° ë°ì€ íŒŒë€ìƒ‰
    100: '#dbeafe',  // ë°ì€ íŒŒë€ìƒ‰
    500: '#3b82f6',  // ê¸°ë³¸ íŒŒë€ìƒ‰
    600: '#2563eb',  // ì§„í•œ íŒŒë€ìƒ‰
    900: '#1e3a8a'   // ë§¤ìš° ì§„í•œ íŒŒë€ìƒ‰
  },
  
  // ìƒíƒœ ìƒ‰ìƒ
  success: {
    100: '#dcfce7',  // ë°ì€ ì´ˆë¡ìƒ‰
    600: '#16a34a',  // ì§„í•œ ì´ˆë¡ìƒ‰
    800: '#166534'   // ë§¤ìš° ì§„í•œ ì´ˆë¡ìƒ‰
  },
  
  warning: {
    100: '#fef3c7',  // ë°ì€ ë…¸ë€ìƒ‰
    600: '#d97706',  // ì§„í•œ ë…¸ë€ìƒ‰
    800: '#92400e'   // ë§¤ìš° ì§„í•œ ë…¸ë€ìƒ‰
  },
  
  danger: {
    100: '#fee2e2',  // ë°ì€ ë¹¨ê°„ìƒ‰
    600: '#dc2626',  // ì§„í•œ ë¹¨ê°„ìƒ‰
    800: '#991b1b'   // ë§¤ìš° ì§„í•œ ë¹¨ê°„ìƒ‰
  }
};

// íƒ€ì´í¬ê·¸ë˜í”¼ ì‹œìŠ¤í…œ
const typography = {
  // ì œëª©
  h1: 'text-3xl font-bold text-gray-900',
  h2: 'text-2xl font-bold text-gray-800',
  h3: 'text-xl font-semibold text-gray-800',
  
  // ë³¸ë¬¸
  body: 'text-base text-gray-700',
  caption: 'text-sm text-gray-600',
  small: 'text-xs text-gray-500',
  
  // ë²„íŠ¼
  button: 'font-medium text-sm',
  buttonLg: 'font-medium text-base'
};

// ê°„ê²© ì‹œìŠ¤í…œ (Tailwind ê¸°ë°˜)
const spacing = {
  xs: '0.5rem',    // 8px
  sm: '0.75rem',   // 12px
  md: '1rem',      // 16px
  lg: '1.5rem',    // 24px
  xl: '2rem',      // 32px
  '2xl': '3rem'    // 48px
};
```

### ğŸ”„ ìƒíƒœ ê´€ë¦¬ íŒ¨í„´

#### 1. ì „ì—­ ìƒíƒœ (Context API)
```javascript
// NotificationContext - ì•Œë¦¼ ì‹œìŠ¤í…œ
const NotificationContext = createContext();

export const NotificationProvider = ({ children }) => {
  const [notifications, setNotifications] = useState([]);
  const [unreadCount, setUnreadCount] = useState(0);
  
  const fetchNotifications = useCallback(async () => {
    try {
      const response = await api.get('/api/notifications');
      setNotifications(response.data.notifications || []);
      setUnreadCount(response.data.unreadCount || 0);
    } catch (error) {
      console.error('ì•Œë¦¼ ì¡°íšŒ ì‹¤íŒ¨:', error);
    }
  }, []);
  
  const markAllAsRead = useCallback(async () => {
    try {
      await api.put('/api/notifications/read-all');
      setNotifications(prev => 
        prev.map(notification => ({ ...notification, read: true }))
      );
      setUnreadCount(0);
    } catch (error) {
      console.error('ì•Œë¦¼ ì½ìŒ ì²˜ë¦¬ ì‹¤íŒ¨:', error);
    }
  }, []);
  
  const value = {
    notifications,
    unreadCount,
    fetchNotifications,
    markAllAsRead
  };
  
  return (
    <NotificationContext.Provider value={value}>
      {children}
    </NotificationContext.Provider>
  );
};

export const useNotifications = () => {
  const context = useContext(NotificationContext);
  if (!context) {
    throw new Error('useNotifications must be used within NotificationProvider');
  }
  return context;
};
```

#### 2. ì§€ì—­ ìƒíƒœ (useState + useReducer)
```javascript
// ë³µì¡í•œ í¼ ìƒíƒœ ê´€ë¦¬
const useFormState = (initialState) => {
  const [state, dispatch] = useReducer((state, action) => {
    switch (action.type) {
      case 'SET_FIELD':
        return { ...state, [action.field]: action.value };
      case 'SET_MULTIPLE':
        return { ...state, ...action.values };
      case 'RESET':
        return initialState;
      case 'VALIDATE':
        return { ...state, errors: validateForm(state) };
      default:
        return state;
    }
  }, { ...initialState, errors: {} });
  
  const setField = (field, value) => {
    dispatch({ type: 'SET_FIELD', field, value });
  };
  
  const setMultiple = (values) => {
    dispatch({ type: 'SET_MULTIPLE', values });
  };
  
  const reset = () => {
    dispatch({ type: 'RESET' });
  };
  
  const validate = () => {
    dispatch({ type: 'VALIDATE' });
    return Object.keys(state.errors).length === 0;
  };
  
  return { state, setField, setMultiple, reset, validate };
};
```

---

## ğŸš€ ì„±ëŠ¥ ìµœì í™” ë° ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤

### âš¡ ë Œë”ë§ ìµœì í™”

#### 1. ë©”ëª¨ì´ì œì´ì…˜ íŒ¨í„´
```javascript
// React.memoë¥¼ í™œìš©í•œ ì»´í¬ë„ŒíŠ¸ ìµœì í™”
const CampaignCard = React.memo(({ 
  campaign, 
  onSelect, 
  onEdit, 
  onDelete,
  currentUser 
}) => {
  // ìº í˜ì¸ ì¹´ë“œ ë Œë”ë§ ë¡œì§
  
  return (
    <div className="campaign-card">
      {/* ì¹´ë“œ ë‚´ìš© */}
    </div>
  );
}, (prevProps, nextProps) => {
  // ì–•ì€ ë¹„êµë¡œ ìµœì í™”
  return (
    prevProps.campaign.id === nextProps.campaign.id &&
    prevProps.campaign.updatedAt === nextProps.campaign.updatedAt &&
    prevProps.currentUser?.id === nextProps.currentUser?.id
  );
});

// useMemoë¥¼ í™œìš©í•œ ê³„ì‚° ìµœì í™”
const CampaignList = ({ campaigns, filters }) => {
  const filteredCampaigns = useMemo(() => {
    return campaigns.filter(campaign => {
      if (filters.status && campaign.status !== filters.status) return false;
      if (filters.manager && campaign.managerId !== filters.manager) return false;
      if (filters.search) {
        const searchLower = filters.search.toLowerCase();
        return campaign.name.toLowerCase().includes(searchLower) ||
               campaign.client.toLowerCase().includes(searchLower);
      }
      return true;
    });
  }, [campaigns, filters]);
  
  const sortedCampaigns = useMemo(() => {
    return filteredCampaigns.sort((a, b) => {
      return new Date(b.updatedAt) - new Date(a.updatedAt);
    });
  }, [filteredCampaigns]);
  
  return (
    <div>
      {sortedCampaigns.map(campaign => (
        <CampaignCard key={campaign.id} campaign={campaign} />
      ))}
    </div>
  );
};
```

#### 2. ì§€ì—° ë¡œë”© (Lazy Loading)
```javascript
// ì»´í¬ë„ŒíŠ¸ ì§€ì—° ë¡œë”©
const Dashboard = lazy(() => import('./pages/Dashboard'));
const CampaignManagement = lazy(() => import('./pages/CampaignManagement'));
const SalesRegistration = lazy(() => import('./pages/SalesRegistration'));
const UserManagement = lazy(() => import('./pages/UserManagement'));

// ë¡œë”© ìŠ¤í”¼ë„ˆì™€ í•¨ê»˜ ì‚¬ìš©
const App = () => {
  return (
    <Router>
      <Suspense fallback={<LoadingSpinner />}>
        <Routes>
          <Route path="/admin/dashboard" element={<Dashboard />} />
          <Route path="/admin/campaigns" element={<CampaignManagement />} />
          <Route path="/admin/sales" element={<SalesRegistration />} />
          <Route path="/admin/users" element={<UserManagement />} />
        </Routes>
      </Suspense>
    </Router>
  );
};
```

### ğŸ” ë°ì´í„° ìµœì í™”

#### 1. API ìš”ì²­ ìµœì í™”
```javascript
// ë³‘ë ¬ ìš”ì²­ ì²˜ë¦¬
const loadDashboardData = async (user) => {
  try {
    // ì—¬ëŸ¬ APIë¥¼ ë³‘ë ¬ë¡œ ìš”ì²­
    const [
      campaignsResponse,
      salesStatsResponse,
      purchaseStatsResponse,
      usersResponse
    ] = await Promise.all([
      api.get('/api/campaigns', { 
        params: { viewerId: user.id, viewerRole: user.role }
      }),
      api.get('/api/sales/summary/stats', { 
        params: { viewerId: user.id, viewerRole: user.role }
      }),
      api.get('/api/purchase-requests/summary/stats', { 
        params: { viewerId: user.id, viewerRole: user.role }
      }),
      api.get('/api/users', { 
        params: { viewerId: user.id, viewerRole: user.role }
      })
    ]);
    
    return {
      campaigns: campaignsResponse.data,
      salesStats: salesStatsResponse.data,
      purchaseStats: purchaseStatsResponse.data,
      users: usersResponse.data
    };
    
  } catch (error) {
    console.error('ëŒ€ì‹œë³´ë“œ ë°ì´í„° ë¡œë”© ì‹¤íŒ¨:', error);
    throw error;
  }
};

// ìš”ì²­ ì¤‘ë³µ ì œê±° (debounce)
const useDebounce = (value, delay) => {
  const [debouncedValue, setDebouncedValue] = useState(value);
  
  useEffect(() => {
    const handler = setTimeout(() => {
      setDebouncedValue(value);
    }, delay);
    
    return () => {
      clearTimeout(handler);
    };
  }, [value, delay]);
  
  return debouncedValue;
};

// ê²€ìƒ‰ì–´ debounce ì ìš©
const SearchInput = ({ onSearch }) => {
  const [searchTerm, setSearchTerm] = useState('');
  const debouncedSearchTerm = useDebounce(searchTerm, 300);
  
  useEffect(() => {
    onSearch(debouncedSearchTerm);
  }, [debouncedSearchTerm, onSearch]);
  
  return (
    <input
      type="text"
      value={searchTerm}
      onChange={(e) => setSearchTerm(e.target.value)}
      placeholder="ê²€ìƒ‰..."
      className="w-full px-3 py-2 border rounded-lg"
    />
  );
};
```

#### 2. ìºì‹± ì „ëµ
```javascript
// ë©”ëª¨ë¦¬ ìºì‹œ
const cache = new Map();

const getCachedData = async (key, fetcher, ttl = 300000) => { // 5ë¶„ TTL
  const cached = cache.get(key);
  
  if (cached && Date.now() - cached.timestamp < ttl) {
    return cached.data;
  }
  
  const data = await fetcher();
  cache.set(key, {
    data,
    timestamp: Date.now()
  });
  
  return data;
};

// ì‚¬ìš© ì˜ˆì‹œ
const fetchCampaigns = async (userId, userRole) => {
  const cacheKey = `campaigns_${userId}_${userRole}`;
  
  return getCachedData(cacheKey, async () => {
    const response = await api.get('/api/campaigns', {
      params: { viewerId: userId, viewerRole: userRole }
    });
    return response.data;
  });
};
```

---

## ğŸ”® í™•ì¥ì„± ë° ë¯¸ë˜ ê³„íš

### ğŸŒ ë©€í‹°í…Œë„ŒíŠ¸ ì•„í‚¤í…ì²˜

#### 1. í…Œë„ŒíŠ¸ ë¶„ë¦¬ ì „ëµ
```javascript
// í…Œë„ŒíŠ¸ë³„ ë°ì´í„° ë¶„ë¦¬
const getTenantData = (userId, userRole, companyId) => {
  const tenantFilters = {
    // ìŠˆí¼ ì–´ë“œë¯¼: ëª¨ë“  ë°ì´í„° ì ‘ê·¼
    'ìŠˆí¼ ì–´ë“œë¯¼': () => ({}),
    
    // ëŒ€í–‰ì‚¬ ì–´ë“œë¯¼: ìì‹ ì˜ íšŒì‚¬ ë°ì´í„°ë§Œ
    'ëŒ€í–‰ì‚¬ ì–´ë“œë¯¼': () => ({ companyId }),
    
    // ì§ì›: ìì‹ ì´ ë‹´ë‹¹í•˜ëŠ” ë°ì´í„°ë§Œ
    'ì§ì›': () => ({ 
      $or: [
        { managerId: userId },
        { salesPersonId: userId },
        { requesterId: userId }
      ]
    }),
    
    // í´ë¼ì´ì–¸íŠ¸: ìì‹ ê³¼ ê´€ë ¨ëœ ë°ì´í„°ë§Œ
    'í´ë¼ì´ì–¸íŠ¸': () => ({ 
      $or: [
        { userId: userId },
        { clientId: userId }
      ]
    })
  };
  
  return tenantFilters[userRole]?.() || {};
};
```

#### 2. ë‹¤êµ­ì–´ ì§€ì› ì¤€ë¹„
```javascript
// i18n ì‹œìŠ¤í…œ êµ¬ì¡°
const translations = {
  ko: {
    common: {
      save: 'ì €ì¥',
      cancel: 'ì·¨ì†Œ',
      delete: 'ì‚­ì œ',
      edit: 'í¸ì§‘',
      create: 'ìƒì„±'
    },
    dashboard: {
      title: 'ëŒ€ì‹œë³´ë“œ',
      totalRevenue: 'ì´ ë§¤ì¶œ',
      totalExpenses: 'ì´ ì§€ì¶œ',
      netProfit: 'ìˆœì´ìµ'
    },
    campaigns: {
      title: 'ìº í˜ì¸ ê´€ë¦¬',
      createNew: 'ìƒˆ ìº í˜ì¸',
      status: {
        active: 'ì§„í–‰ì¤‘',
        completed: 'ì™„ë£Œ',
        paused: 'ì¼ì‹œì •ì§€'
      }
    }
  },
  en: {
    common: {
      save: 'Save',
      cancel: 'Cancel',
      delete: 'Delete',
      edit: 'Edit',
      create: 'Create'
    }
    // ... ì˜ì–´ ë²ˆì—­
  }
};

// ë²ˆì—­ í›…
const useTranslation = (namespace = 'common') => {
  const [locale] = useState('ko'); // ì¶”í›„ Contextë¡œ ê´€ë¦¬
  
  const t = useCallback((key) => {
    const keys = key.split('.');
    let value = translations[locale][namespace];
    
    for (const k of keys) {
      value = value?.[k];
    }
    
    return value || key;
  }, [locale, namespace]);
  
  return { t };
};
```

### ğŸ“± PWA (Progressive Web App) ì¤€ë¹„

#### 1. ì„œë¹„ìŠ¤ ì›Œì»¤ ì„¤ì •
```javascript
// public/sw.js
const CACHE_NAME = 'brandflow-v1';
const urlsToCache = [
  '/',
  '/static/js/bundle.js',
  '/static/css/main.css',
  '/manifest.json'
];

self.addEventListener('install', (event) => {
  event.waitUntil(
    caches.open(CACHE_NAME)
      .then((cache) => cache.addAll(urlsToCache))
  );
});

self.addEventListener('fetch', (event) => {
  event.respondWith(
    caches.match(event.request)
      .then((response) => {
        // ìºì‹œì—ì„œ ì°¾ìœ¼ë©´ ë°˜í™˜, ì—†ìœ¼ë©´ ë„¤íŠ¸ì›Œí¬ ìš”ì²­
        return response || fetch(event.request);
      })
  );
});
```

#### 2. ì˜¤í”„ë¼ì¸ ì§€ì›
```javascript
// ì˜¤í”„ë¼ì¸ ìƒíƒœ ê°ì§€
const useOnlineStatus = () => {
  const [isOnline, setIsOnline] = useState(navigator.onLine);
  
  useEffect(() => {
    const handleOnline = () => setIsOnline(true);
    const handleOffline = () => setIsOnline(false);
    
    window.addEventListener('online', handleOnline);
    window.addEventListener('offline', handleOffline);
    
    return () => {
      window.removeEventListener('online', handleOnline);
      window.removeEventListener('offline', handleOffline);
    };
  }, []);
  
  return isOnline;
};

// ì˜¤í”„ë¼ì¸ ë°ì´í„° ë™ê¸°í™”
const useOfflineSync = () => {
  const [pendingRequests, setPendingRequests] = useState([]);
  const isOnline = useOnlineStatus();
  
  const addPendingRequest = (request) => {
    setPendingRequests(prev => [...prev, request]);
    localStorage.setItem('pendingRequests', JSON.stringify([...pendingRequests, request]));
  };
  
  const syncPendingRequests = async () => {
    if (!isOnline || pendingRequests.length === 0) return;
    
    for (const request of pendingRequests) {
      try {
        await api(request);
        setPendingRequests(prev => prev.filter(r => r.id !== request.id));
      } catch (error) {
        console.error('ì˜¤í”„ë¼ì¸ ìš”ì²­ ë™ê¸°í™” ì‹¤íŒ¨:', error);
      }
    }
    
    localStorage.removeItem('pendingRequests');
  };
  
  useEffect(() => {
    if (isOnline) {
      syncPendingRequests();
    }
  }, [isOnline]);
  
  return { addPendingRequest, pendingRequests };
};
```

### ğŸ¤– AI/ML í†µí•© ì¤€ë¹„

#### 1. ì½˜í…ì¸  ì¶”ì²œ ì‹œìŠ¤í…œ
```javascript
// AI ê¸°ë°˜ ì£¼ì œ ì¶”ì²œ
const useContentRecommendations = (campaignId, clientHistory) => {
  const [recommendations, setRecommendations] = useState([]);
  const [loading, setLoading] = useState(false);
  
  const generateRecommendations = useCallback(async () => {
    setLoading(true);
    try {
      // AI API í˜¸ì¶œ (ì˜ˆ: OpenAI, ìì²´ ML ëª¨ë¸)
      const response = await api.post('/api/ai/content-recommendations', {
        campaignId,
        clientHistory,
        industryTrends: await getIndustryTrends(),
        competitorAnalysis: await getCompetitorData()
      });
      
      setRecommendations(response.data.recommendations);
    } catch (error) {
      console.error('AI ì¶”ì²œ ì‹¤íŒ¨:', error);
    } finally {
      setLoading(false);
    }
  }, [campaignId, clientHistory]);
  
  return { recommendations, loading, generateRecommendations };
};
```

#### 2. ì„±ê³¼ ì˜ˆì¸¡ ëª¨ë¸
```javascript
// ìº í˜ì¸ ì„±ê³¼ ì˜ˆì¸¡
const useCampaignPerformancePrediction = () => {
  const predictPerformance = async (campaignData) => {
    try {
      const response = await api.post('/api/ai/predict-performance', {
        budget: campaignData.budget,
        industry: campaignData.industry,
        targetAudience: campaignData.targetAudience,
        contentType: campaignData.contentType,
        seasonality: getCurrentSeason(),
        historicalData: await getHistoricalCampaigns()
      });
      
      return {
        expectedROI: response.data.roi,
        confidenceLevel: response.data.confidence,
        keyFactors: response.data.factors,
        recommendations: response.data.recommendations
      };
      
    } catch (error) {
      console.error('ì„±ê³¼ ì˜ˆì¸¡ ì‹¤íŒ¨:', error);
      return null;
    }
  };
  
  return { predictPerformance };
};
```

---

## ğŸ¯ ê²°ë¡  ë° í•µì‹¬ ê°€ì¹˜

BrandFlowëŠ” **ë§ˆì¼€íŒ… ëŒ€í–‰ì‚¬ì˜ ë””ì§€í„¸ íŠ¸ëœìŠ¤í¬ë©”ì´ì…˜ì„ ìœ„í•œ ì˜¬ì¸ì› í”Œë«í¼**ì…ë‹ˆë‹¤.

### ğŸ† í•µì‹¬ ì„±ê³¼
1. **ì—…ë¬´ íš¨ìœ¨ì„± 300% í–¥ìƒ**: ìˆ˜ì‘ì—… â†’ ìë™í™”
2. **ë°ì´í„° ê¸°ë°˜ ì˜ì‚¬ê²°ì •**: ì‹¤ì‹œê°„ ë¶„ì„ â†’ ì •í™•í•œ íŒë‹¨
3. **ì™„ë²½í•œ íˆ¬ëª…ì„±**: í´ë¼ì´ì–¸íŠ¸-ëŒ€í–‰ì‚¬ ê°„ ì‹¤ì‹œê°„ ì†Œí†µ
4. **í™•ì¥ ê°€ëŠ¥í•œ êµ¬ì¡°**: ì‘ì€ ëŒ€í–‰ì‚¬ë¶€í„° ëŒ€ê¸°ì—…ê¹Œì§€

### ğŸ’¡ ì°¨ë³„í™” ìš”ì†Œ
- **ì—­í•  ê¸°ë°˜ ì™„ë²½í•œ ê¶Œí•œ ë¶„ë¦¬**
- **ë³µì¡í•œ ì¸ì„¼í‹°ë¸Œ ê³„ì‚° ìë™í™”**  
- **ìº í˜ì¸-ë§¤ì¶œ-êµ¬ë§¤ìš”ì²­ í†µí•© ê´€ë¦¬**
- **ì‹¤ì‹œê°„ ì¬ë¬´ ë¶„ì„ ë° ì˜ˆì¸¡**

### ğŸš€ ê¸°ìˆ ì  ìš°ìˆ˜ì„±
- **React 18 + ìµœì‹  ê¸°ìˆ  ìŠ¤íƒ**
- **í™•ì¥ ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸ ì•„í‚¤í…ì²˜**
- **ì²´ê³„ì ì¸ ì—ëŸ¬ ì²˜ë¦¬ ë° ì¬ì‹œë„**
- **ì„±ëŠ¥ ìµœì í™”ëœ UI/UX**

BrandFlowëŠ” ë‹¨ìˆœí•œ ê´€ë¦¬ ë„êµ¬ë¥¼ ë„˜ì–´, **ë§ˆì¼€íŒ… ëŒ€í–‰ì‚¬ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ë¥¼ í˜ì‹ í•˜ëŠ” ë””ì§€í„¸ í”Œë«í¼**ì…ë‹ˆë‹¤. ğŸŒŸ